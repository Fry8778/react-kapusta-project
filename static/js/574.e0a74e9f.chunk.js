"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[574],{6574:function(e,a,r){r.r(a),r.d(a,{default:function(){return L}});var n=r(885),t=r(2791),o=r(3504),l=r(6871),i=r(9434),c=r(5985),s=r(2426),u=r.n(s),d={Balance:"Balance_Balance__O4LOU",BalanceRevers:"Balance_BalanceRevers__EyZcy",linkToHome:"Balance_linkToHome__Y++ao",currentPeriod:"Balance_currentPeriod__9dfuH",currentPeriodText:"Balance_currentPeriodText__EM92-",monthChange:"Balance_monthChange__AjWMy",monthChangeBtn:"Balance_monthChangeBtn__zDzb7",monthChangeTxt:"Balance_monthChangeTxt__PW97v",linkReports:"Balance_linkReports__bt1Ul",linkReportsBtn:"Balance_linkReportsBtn__w2Zf9 Balance_linkReports__bt1Ul",reportsIcon:"Balance_reportsIcon__EMLbB",form:"Balance_form__Jb6Ni",labelText:"Balance_labelText__VaQ9z",input:"Balance_input__5zeug",inputReports:"Balance_inputReports__fkIvN",modalWraper:"Balance_modalWraper__3JDsV",currency:"Balance_currency__XIBuY",buttonForm:"Balance_buttonForm__o9Wfr",buttonFormDisabled:"Balance_buttonFormDisabled__lEFHN",balanceTxt:"Balance_balanceTxt__VpQMc",balanceInfo:"Balance_balanceInfo__+wpLb",transactionsWrap:"Balance_transactionsWrap__TR6VY",linkToHomeText:"Balance_linkToHomeText__tJIj4",label:"Balance_label__9QrSJ",wraper:"Balance_wraper__6wgRV",balanceWraper:"Balance_balanceWraper__kdpNk"},p=r(7609),m={modalBalance:"BalanceModal_modalBalance__7Py5e",modalText:"BalanceModal_modalText__l0HVq",modalAfterText:"BalanceModal_modalAfterText__LBgmh",modalTop:"BalanceModal_modalTop__XMPZa"},f=r(3329);function v(){return(0,f.jsx)("div",{className:m.backdrop,children:(0,f.jsxs)("div",{className:m.modalBalance,children:[(0,f.jsx)("div",{className:m.modalTop}),(0,f.jsx)("p",{className:m.modalText,children:"Hello! To get started, enter the current balance of your account!"}),(0,f.jsx)("p",{className:m.modalAfterText,children:"You can't spend money until you have it :)"})]})})}var h=r(3804),g=r(9869),x=r(9801),b=r(8724),_="Container_container__VVOCq";function S(e){var a=e.children;return(0,f.jsx)("div",{className:_,children:a})}var w=r(4367),y=function(){return y=Object.assign||function(e){for(var a,r=1,n=arguments.length;r<n;r++)for(var t in a=arguments[r])Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e},y.apply(this,arguments)};function j(e,a,r){if(r||2===arguments.length)for(var n,t=0,o=a.length;t<o;t++)!n&&t in a||(n||(n=Array.prototype.slice.call(a,0,t)),n[t]=a[t]);return e.concat(n||a)}var B=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},N={k:1e3,m:1e6,b:1e9},R=function(e){var a=e.value,r=e.groupSeparator,n=void 0===r?",":r,t=e.decimalSeparator,o=void 0===t?".":t,l=e.allowDecimals,i=void 0===l||l,c=e.decimalsLimit,s=void 0===c?2:c,u=e.allowNegativeValue,d=void 0===u||u,p=e.disableAbbreviations,m=void 0!==p&&p,f=e.prefix,v=void 0===f?"":f,h=e.transformRawValue,g=(void 0===h?function(e){return e}:h)(a);if("-"===g)return g;var x=m?[]:["k","m","b"],b=new RegExp("((^|\\D)-\\d)|(-"+B(v)+")").test(g),_=RegExp("(\\d+)-?"+B(v)).exec(a)||[],S=_[0],w=_[1],y=function(e,a){void 0===a&&(a=",");var r=new RegExp(B(a),"g");return e.replace(r,"")}(v?S?g.replace(S,"").concat(w):g.replace(v,""):g,n),R=function(e,a){var r=B(a.join("")),n=new RegExp("[^\\d"+r+"]","gi");return e.replace(n,"")}(y,j([n,o],x)),T=R;if(!m){if(x.some((function(e){return e===R.toLowerCase()})))return"";var k=function(e,a){void 0===a&&(a=".");var r=new RegExp("(\\d+("+B(a)+"\\d*)?)([kmb])$","i"),n=e.match(r);if(n){var t=n[1],o=n[3],l=N[o.toLowerCase()];return Number(t.replace(a,"."))*l}}(R,o);k&&(T=String(k))}var C=b&&d?"-":"";if(o&&T.includes(o)){var V=R.split(o),E=V[0],D=V[1],F=s&&D?D.slice(0,s):D;return""+C+E+(i?""+o+F:"")}return""+C+T},T=function(e,a){var r=a.groupSeparator,n=void 0===r?",":r,t=a.decimalSeparator,o=void 0===t?".":t,l=new RegExp("\\d([^"+B(n)+B(o)+"0-9]+)"),i=e.match(l);return i?i[1]:void 0},k=function(e){var a=e.value,r=e.decimalSeparator,n=e.intlConfig,t=e.decimalScale,o=e.prefix,l=void 0===o?"":o,i=e.suffix,c=void 0===i?"":i;if(""===a||void 0===a)return"";if("-"===a)return"-";var s=new RegExp("^\\d?-"+(l?B(l)+"?":"")+"\\d").test(a),u="."!==r?C(a,r,s):a,d=(n?new Intl.NumberFormat(n.locale,n.currency?{style:"currency",currency:n.currency,minimumFractionDigits:t||0,maximumFractionDigits:20}:void 0):new Intl.NumberFormat(void 0,{minimumFractionDigits:t||0,maximumFractionDigits:20})).formatToParts(Number(u)),p=V(d,e),m=T(p,y({},e)),f=a.slice(-1)===r?r:"",v=(u.match(RegExp("\\d+\\.(\\d+)"))||[])[1];return void 0===t&&v&&r&&(p=p.includes(r)?p.replace(RegExp("(\\d+)("+B(r)+")(\\d+)","g"),"$1$2"+v):m&&!c?p.replace(m,""+r+v+m):""+p+r+v),c&&f?""+p+f+c:m&&f?p.replace(m,""+f+m):m&&c?p.replace(m,""+f+c):[p,f,c].join("")},C=function(e,a,r){var n=e;return a&&"."!==a&&(n=n.replace(RegExp(B(a),"g"),"."),r&&"-"===a&&(n="-"+n.slice(1))),n},V=function(e,a){var r=a.prefix,n=a.groupSeparator,t=a.decimalSeparator,o=a.decimalScale,l=a.disableGroupSeparators,i=void 0!==l&&l;return e.reduce((function(e,a,l){var c=a.type,s=a.value;return 0===l&&r?"minusSign"===c?[s,r]:"currency"===c?j(j([],e),[r]):[r,s]:"currency"===c?r?e:j(j([],e),[s]):"group"===c?i?e:j(j([],e),[void 0!==n?n:s]):"decimal"===c?void 0!==o&&0===o?e:j(j([],e),[void 0!==t?t:s]):j(j([],e),"fraction"===c?[void 0!==o?s.slice(0,o):s]:[s])}),[""]).join("")},E={currencySymbol:"",groupSeparator:"",decimalSeparator:"",prefix:"",suffix:""},D=function(e){return RegExp(/\d/,"gi").test(e)},F=(0,t.forwardRef)((function(e,a){var r=e.allowDecimals,n=void 0===r||r,o=e.allowNegativeValue,l=void 0===o||o,i=e.id,c=e.name,s=e.className,u=e.customInput,d=e.decimalsLimit,p=e.defaultValue,m=e.disabled,f=void 0!==m&&m,v=e.maxLength,h=e.value,g=e.onValueChange,x=e.fixedDecimalLength,b=e.placeholder,_=e.decimalScale,S=e.prefix,w=e.suffix,j=e.intlConfig,B=e.step,N=e.min,C=e.max,V=e.disableGroupSeparators,F=void 0!==V&&V,A=e.disableAbbreviations,M=void 0!==A&&A,P=e.decimalSeparator,I=e.groupSeparator,O=e.onChange,Z=e.onFocus,L=e.onBlur,U=e.onKeyDown,H=e.onKeyUp,W=e.transformRawValue,Y=function(e,a){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var t=0;for(n=Object.getOwnPropertySymbols(e);t<n.length;t++)a.indexOf(n[t])<0&&Object.prototype.propertyIsEnumerable.call(e,n[t])&&(r[n[t]]=e[n[t]])}return r}(e,["allowDecimals","allowNegativeValue","id","name","className","customInput","decimalsLimit","defaultValue","disabled","maxLength","value","onValueChange","fixedDecimalLength","placeholder","decimalScale","prefix","suffix","intlConfig","step","min","max","disableGroupSeparators","disableAbbreviations","decimalSeparator","groupSeparator","onChange","onFocus","onBlur","onKeyDown","onKeyUp","transformRawValue"]);if(P&&D(P))throw new Error("decimalSeparator cannot be a number");if(I&&D(I))throw new Error("groupSeparator cannot be a number");var K=(0,t.useMemo)((function(){return function(e){var a=e||{},r=a.locale,n=a.currency;return(r?new Intl.NumberFormat(r,n?{currency:n,style:"currency"}:void 0):new Intl.NumberFormat).formatToParts(1000.1).reduce((function(e,a,r){return"currency"===a.type?y(y({},e),0===r?{currencySymbol:a.value,prefix:a.value}:{currencySymbol:a.value,suffix:a.value}):"group"===a.type?y(y({},e),{groupSeparator:a.value}):"decimal"===a.type?y(y({},e),{decimalSeparator:a.value}):e}),E)}(j)}),[j]),$=P||K.decimalSeparator||"",q=I||K.groupSeparator||"";if($&&q&&$===q&&!1===F)throw new Error("decimalSeparator cannot be the same as groupSeparator");var z={decimalSeparator:$,groupSeparator:q,disableGroupSeparators:F,intlConfig:j,prefix:S||K.prefix,suffix:w},G={decimalSeparator:$,groupSeparator:q,allowDecimals:n,decimalsLimit:d||x||2,allowNegativeValue:l,disableAbbreviations:M,prefix:S||K.prefix,transformRawValue:W},J=void 0!==p&&null!==p?k(y(y({},z),{decimalScale:_,value:String(p)})):void 0!==h&&null!==h?k(y(y({},z),{decimalScale:_,value:String(h)})):"",Q=(0,t.useState)(J),X=Q[0],ee=Q[1],ae=(0,t.useState)(!1),re=ae[0],ne=ae[1],te=(0,t.useState)(0),oe=te[0],le=te[1],ie=(0,t.useState)(0),ce=ie[0],se=ie[1],ue=(0,t.useState)(null),de=ue[0],pe=ue[1],me=a||(0,t.useRef)(null),fe=function(e,a){ne(!0);var r=function(e){var a=e.selectionStart,r=e.value,n=e.lastKeyStroke,t=e.stateValue,o=e.groupSeparator,l=a,i=r;if(t&&l){var c=r.split("");return"Backspace"===n&&t[l]===o&&(c.splice(l-1,1),l-=1),"Delete"===n&&t[l]===o&&(c.splice(l,1),l+=1),{modifiedValue:i=c.join(""),cursorPosition:l}}return{modifiedValue:i,cursorPosition:a}}({selectionStart:a,value:e,lastKeyStroke:de,stateValue:X,groupSeparator:q}),n=r.modifiedValue,t=r.cursorPosition,o=R(y({value:n},G));if(!(v&&o.replace(/-/g,"").length>v)){if(""===o||"-"===o||o===$)return g&&g(void 0,c,{float:null,formatted:"",value:""}),void ee(o);var l=parseFloat(o.replace($,".")),i=k(y({value:o},z));if(void 0!==t&&null!==t){var s=t+(i.length-e.length);s=s<=0?S?S.length:0:s,le(s),se(ce+1)}if(ee(i),g)g(o,c,{float:l,formatted:i,value:o})}};(0,t.useEffect)((function(){re&&"-"!==X&&me&&"object"===typeof me&&me.current&&me.current.setSelectionRange(oe,oe)}),[X,oe,me,re,ce]);var ve=y({type:"text",inputMode:"decimal",id:i,name:c,className:s,onChange:function(e){var a=e.target,r=a.value,n=a.selectionStart;fe(r,n),O&&O(e)},onBlur:function(e){var a=e.target.value,r=R(y({value:a},G));if("-"===r||!r)return ee(""),void(L&&L(e));var n=function(e,a,r){if(r&&e.length>1){if(e.includes(a)){var n=e.split(a),t=n[0];if((o=n[1]).length>r)return""+t+a+o.slice(0,r)}var o,l=e.length>r?new RegExp("(\\d+)(\\d{"+r+"})"):new RegExp("(\\d)(\\d+)"),i=e.match(l);if(i)return""+(t=i[1])+a+i[2]}return e}(r,$,x),t=function(e,a,r){if(void 0===a&&(a="."),void 0===r||""===e||void 0===e)return e;if(!e.match(/\d/g))return"";var n=e.split(a),t=n[0],o=n[1];if(0===r)return t;var l=o||"";if(l.length<r)for(;l.length<r;)l+="0";else l=l.slice(0,r);return""+t+a+l}(n,$,void 0!==_?_:x),o=parseFloat(t.replace($,".")),l=k(y(y({},z),{value:t}));g&&g(t,c,{float:o,formatted:l,value:t}),ee(l),L&&L(e)},onFocus:function(e){return Z&&Z(e),X?X.length:0},onKeyDown:function(e){var a=e.key;if(pe(a),B&&("ArrowUp"===a||"ArrowDown"===a)){e.preventDefault(),le(X.length);var r=parseFloat(void 0!==h&&null!==h?String(h).replace($,"."):R(y({value:X},G)))||0,n="ArrowUp"===a?r+B:r-B;if(void 0!==N&&n<N)return;if(void 0!==C&&n>C)return;var t=String(B).includes(".")?Number(String(B).split(".")[1].length):void 0;fe(String(t?n.toFixed(t):n).replace(".",$))}U&&U(e)},onKeyUp:function(e){var a=e.key,r=e.currentTarget.selectionStart;if("ArrowUp"!==a&&"ArrowDown"!==a&&"-"!==X){var n=T(X,{groupSeparator:q,decimalSeparator:$});if(n&&r&&r>X.length-n.length&&me&&"object"===typeof me&&me.current){var t=X.length-n.length;me.current.setSelectionRange(t,t)}}H&&H(e)},placeholder:b,disabled:f,value:void 0===h||null===h||"-"===X||$&&X===$?X:k(y(y({},z),{decimalScale:re?void 0:_,value:String(h)})),ref:me},Y);if(u){var he=u;return t.createElement(he,y({},ve))}return t.createElement("input",y({},ve))}));F.displayName="CurrencyInput";var A=F,M=r(2881),P=h.Z.reports,I=h.Z.transactions,O=d.Balance,Z=d.BalanceRevers;function L(){var e=(0,t.useState)(0),a=(0,n.Z)(e,2),r=a[0],s=a[1],m=(0,t.useState)(!1),h=(0,n.Z)(m,2),_=h[0],y=h[1],j=(0,t.useState)(null),B=(0,n.Z)(j,2),N=B[0],R=B[1],T=(0,i.I0)(),k=!(0,l.TH)().pathname.endsWith("transactions"),C=k?Z:O,V=u()().add(r,"M").format("MMMM YYYY"),E=u()().add(r,"M").format("YYYY-MM"),D=(0,i.v9)(g.is).balance,F=(0,i.v9)(g.is).transactions.length,L=(0,w.Z)(Number(D));(0,t.useEffect)((function(){k&&(T((0,x.Nv)(E)),T((0,x.WP)(V)))}),[k,E,T,V]);var U=function(){return y(!_)};return(0,f.jsx)("div",{children:(0,f.jsxs)(S,{children:[(0,f.jsxs)("div",{className:"".concat(C," ").concat(d.container),children:[k&&(0,f.jsxs)(o.rU,{to:I,className:d.linkToHome,children:[(0,f.jsx)("svg",{width:"24",height:"24",children:(0,f.jsx)("use",{href:"".concat(p.Z,"#arrow-to-main-icon")})}),(0,f.jsx)("p",{className:d.linkToHomeText,children:"Main page"})]}),(0,f.jsxs)("div",{className:d.wraper,children:[k?(0,f.jsxs)("div",{className:d.currentPeriod,children:[(0,f.jsx)("p",{className:d.currentPeriodText,children:"Current period:"}),(0,f.jsxs)("div",{className:d.monthChange,children:[(0,f.jsx)("button",{onClick:function(){s(r-1)},type:"button",className:d.monthChangeBtn,children:(0,f.jsx)("svg",{width:6,height:12,children:(0,f.jsx)("use",{href:"".concat(p.Z,"#arrow-prev-icon")})})}),(0,f.jsx)("p",{className:d.monthChangeTxt,children:V}),(0,f.jsx)("button",{onClick:function(){s(r+1)},type:"button",className:d.monthChangeBtn,children:(0,f.jsx)("svg",{width:6,height:12,children:(0,f.jsx)("use",{href:"".concat(p.Z,"#arrow-next-icon")})})})]})]}):F?(0,f.jsxs)(o.rU,{to:P,className:d.linkReports,children:["Reports",(0,f.jsx)("svg",{width:"14",height:"14",className:d.reportsIcon,children:(0,f.jsx)("use",{href:"".concat(p.Z,"#report-icon")})})]}):(0,f.jsxs)("button",{type:"button",className:d.linkReportsBtn,onClick:function(){c.Am.warning("You have not made transactions yet")},children:["Reports",(0,f.jsx)("svg",{width:"14",height:"14",className:d.reportsIcon,children:(0,f.jsx)("use",{href:"".concat(p.Z,"#report-icon")})})]}),k?(0,f.jsxs)("div",{className:d.balanceWraper,children:[(0,f.jsx)("p",{className:d.balanceTxt,children:"Balance:"}),(0,f.jsxs)("p",{className:d.inputReports,children:[L," UAH"]})]}):(0,f.jsx)("form",{className:d.form,onSubmit:function(e){var a=Number.parseFloat(N);e.preventDefault(),a<1?c.Am.warn("Balance must be greater than or equal to 1 UAH"):k||F||0!==D||(Number.isNaN(a)?c.Am.warn("Please enter balance"):(U(),T(b.r.updateUserBalance(a))))},children:(0,f.jsxs)("label",{className:d.label,children:[(0,f.jsx)("span",{className:d.labelText,children:"Balance:"}),(0,f.jsxs)("div",{className:d.modalWraper,children:[0!==D||F?(0,f.jsx)("input",{className:d.input,type:"text",required:!0,name:"balance",value:L,readOnly:!0}):(0,f.jsx)(A,{className:d.input,id:"balance",name:"balance",placeholder:"00.00",decimalsLimit:2,decimalSeparator:".",onValueChange:function(e){R(e)}}),(0,f.jsx)("p",{className:d.currency,children:"UAH"}),!k&&(0,f.jsx)("button",{type:"submit",className:0!==D||F?d.buttonFormDisabled:d.buttonForm,disabled:0===!D&&!F,children:"Confirm"}),0===D&&!F&&(0,f.jsx)(v,{})]})]})})]})]}),(0,f.jsx)("div",{className:k?void 0:d.transactionsWrap,children:(0,f.jsx)(t.Suspense,{fallback:(0,f.jsx)(M.Z,{}),children:(0,f.jsx)(l.j3,{})})})]})})}},4367:function(e,a,r){function n(e){var a=e.toFixed(2).toString().split("."),r=a[0].split("").reverse().map((function(e,a){return(a+1)%3===0?" ".concat(e):e})).reverse().join("");return"".concat(r,".").concat(a[1])}r.d(a,{Z:function(){return n}})}}]);
//# sourceMappingURL=574.e0a74e9f.chunk.js.map