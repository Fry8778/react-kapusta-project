"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[574],{6574:function(e,a,r){r.r(a),r.d(a,{default:function(){return U}});var n=r(885),t=r(2791),o=r(3504),l=r(6871),i=r(9434),c=r(5985),s=r(2426),u=r.n(s),d={Balance:"Balance_Balance__O4LOU",BalanceRevers:"Balance_BalanceRevers__EyZcy",linkToHome:"Balance_linkToHome__Y++ao",currentPeriod:"Balance_currentPeriod__9dfuH",currentPeriodText:"Balance_currentPeriodText__EM92-",monthChange:"Balance_monthChange__AjWMy",monthChangeBtn:"Balance_monthChangeBtn__zDzb7",monthChangeTxt:"Balance_monthChangeTxt__PW97v",linkReports:"Balance_linkReports__bt1Ul",linkReportsBtn:"Balance_linkReportsBtn__w2Zf9 Balance_linkReports__bt1Ul",reportsIcon:"Balance_reportsIcon__EMLbB",form:"Balance_form__Jb6Ni",labelText:"Balance_labelText__VaQ9z",input:"Balance_input__5zeug",inputReports:"Balance_inputReports__fkIvN",modalWraper:"Balance_modalWraper__3JDsV",currency:"Balance_currency__XIBuY",buttonForm:"Balance_buttonForm__o9Wfr",buttonFormDisabled:"Balance_buttonFormDisabled__lEFHN",balanceTxt:"Balance_balanceTxt__VpQMc",balanceInfo:"Balance_balanceInfo__+wpLb",transactionsWrap:"Balance_transactionsWrap__TR6VY",linkToHomeText:"Balance_linkToHomeText__tJIj4",label:"Balance_label__9QrSJ",wraper:"Balance_wraper__6wgRV",balanceWraper:"Balance_balanceWraper__kdpNk"},p=r(7609),m={modalBalance:"BalanceModal_modalBalance__7Py5e",modalText:"BalanceModal_modalText__l0HVq",modalAfterText:"BalanceModal_modalAfterText__LBgmh",modalTop:"BalanceModal_modalTop__XMPZa"},f=r(3329);function v(){return(0,f.jsx)("div",{className:m.backdrop,children:(0,f.jsxs)("div",{className:m.modalBalance,children:[(0,f.jsx)("div",{className:m.modalTop}),(0,f.jsx)("p",{className:m.modalText,children:"Hello! To get started, enter the current balance of your account!"}),(0,f.jsx)("p",{className:m.modalAfterText,children:"You can't spend money until you have it :)"})]})})}var h=r(3804),g=r(9869),x=r(9801),b=r(8724),_="Container_container__VVOCq";function S(e){var a=e.children;return(0,f.jsx)("div",{className:_,children:a})}var w=r(9843),y=r(4367),j=function(){return j=Object.assign||function(e){for(var a,r=1,n=arguments.length;r<n;r++)for(var t in a=arguments[r])Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e},j.apply(this,arguments)};function B(e,a,r){if(r||2===arguments.length)for(var n,t=0,o=a.length;t<o;t++)!n&&t in a||(n||(n=Array.prototype.slice.call(a,0,t)),n[t]=a[t]);return e.concat(n||a)}var N=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},R={k:1e3,m:1e6,b:1e9},T=function(e){var a=e.value,r=e.groupSeparator,n=void 0===r?",":r,t=e.decimalSeparator,o=void 0===t?".":t,l=e.allowDecimals,i=void 0===l||l,c=e.decimalsLimit,s=void 0===c?2:c,u=e.allowNegativeValue,d=void 0===u||u,p=e.disableAbbreviations,m=void 0!==p&&p,f=e.prefix,v=void 0===f?"":f,h=e.transformRawValue,g=(void 0===h?function(e){return e}:h)(a);if("-"===g)return g;var x=m?[]:["k","m","b"],b=new RegExp("((^|\\D)-\\d)|(-"+N(v)+")").test(g),_=RegExp("(\\d+)-?"+N(v)).exec(a)||[],S=_[0],w=_[1],y=function(e,a){void 0===a&&(a=",");var r=new RegExp(N(a),"g");return e.replace(r,"")}(v?S?g.replace(S,"").concat(w):g.replace(v,""):g,n),j=function(e,a){var r=N(a.join("")),n=new RegExp("[^\\d"+r+"]","gi");return e.replace(n,"")}(y,B([n,o],x)),T=j;if(!m){if(x.some((function(e){return e===j.toLowerCase()})))return"";var k=function(e,a){void 0===a&&(a=".");var r=new RegExp("(\\d+("+N(a)+"\\d*)?)([kmb])$","i"),n=e.match(r);if(n){var t=n[1],o=n[3],l=R[o.toLowerCase()];return Number(t.replace(a,"."))*l}}(j,o);k&&(T=String(k))}var C=b&&d?"-":"";if(o&&T.includes(o)){var E=j.split(o),V=E[0],D=E[1],F=s&&D?D.slice(0,s):D;return""+C+V+(i?""+o+F:"")}return""+C+T},k=function(e,a){var r=a.groupSeparator,n=void 0===r?",":r,t=a.decimalSeparator,o=void 0===t?".":t,l=new RegExp("\\d([^"+N(n)+N(o)+"0-9]+)"),i=e.match(l);return i?i[1]:void 0},C=function(e){var a=e.value,r=e.decimalSeparator,n=e.intlConfig,t=e.decimalScale,o=e.prefix,l=void 0===o?"":o,i=e.suffix,c=void 0===i?"":i;if(""===a||void 0===a)return"";if("-"===a)return"-";var s=new RegExp("^\\d?-"+(l?N(l)+"?":"")+"\\d").test(a),u="."!==r?E(a,r,s):a,d=(n?new Intl.NumberFormat(n.locale,n.currency?{style:"currency",currency:n.currency,minimumFractionDigits:t||0,maximumFractionDigits:20}:void 0):new Intl.NumberFormat(void 0,{minimumFractionDigits:t||0,maximumFractionDigits:20})).formatToParts(Number(u)),p=V(d,e),m=k(p,j({},e)),f=a.slice(-1)===r?r:"",v=(u.match(RegExp("\\d+\\.(\\d+)"))||[])[1];return void 0===t&&v&&r&&(p=p.includes(r)?p.replace(RegExp("(\\d+)("+N(r)+")(\\d+)","g"),"$1$2"+v):m&&!c?p.replace(m,""+r+v+m):""+p+r+v),c&&f?""+p+f+c:m&&f?p.replace(m,""+f+m):m&&c?p.replace(m,""+f+c):[p,f,c].join("")},E=function(e,a,r){var n=e;return a&&"."!==a&&(n=n.replace(RegExp(N(a),"g"),"."),r&&"-"===a&&(n="-"+n.slice(1))),n},V=function(e,a){var r=a.prefix,n=a.groupSeparator,t=a.decimalSeparator,o=a.decimalScale,l=a.disableGroupSeparators,i=void 0!==l&&l;return e.reduce((function(e,a,l){var c=a.type,s=a.value;return 0===l&&r?"minusSign"===c?[s,r]:"currency"===c?B(B([],e),[r]):[r,s]:"currency"===c?r?e:B(B([],e),[s]):"group"===c?i?e:B(B([],e),[void 0!==n?n:s]):"decimal"===c?void 0!==o&&0===o?e:B(B([],e),[void 0!==t?t:s]):B(B([],e),"fraction"===c?[void 0!==o?s.slice(0,o):s]:[s])}),[""]).join("")},D={currencySymbol:"",groupSeparator:"",decimalSeparator:"",prefix:"",suffix:""},F=function(e){return RegExp(/\d/,"gi").test(e)},M=(0,t.forwardRef)((function(e,a){var r=e.allowDecimals,n=void 0===r||r,o=e.allowNegativeValue,l=void 0===o||o,i=e.id,c=e.name,s=e.className,u=e.customInput,d=e.decimalsLimit,p=e.defaultValue,m=e.disabled,f=void 0!==m&&m,v=e.maxLength,h=e.value,g=e.onValueChange,x=e.fixedDecimalLength,b=e.placeholder,_=e.decimalScale,S=e.prefix,w=e.suffix,y=e.intlConfig,B=e.step,N=e.min,R=e.max,E=e.disableGroupSeparators,V=void 0!==E&&E,M=e.disableAbbreviations,P=void 0!==M&&M,A=e.decimalSeparator,I=e.groupSeparator,Z=e.onChange,O=e.onFocus,L=e.onBlur,U=e.onKeyDown,W=e.onKeyUp,H=e.transformRawValue,Y=function(e,a){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var t=0;for(n=Object.getOwnPropertySymbols(e);t<n.length;t++)a.indexOf(n[t])<0&&Object.prototype.propertyIsEnumerable.call(e,n[t])&&(r[n[t]]=e[n[t]])}return r}(e,["allowDecimals","allowNegativeValue","id","name","className","customInput","decimalsLimit","defaultValue","disabled","maxLength","value","onValueChange","fixedDecimalLength","placeholder","decimalScale","prefix","suffix","intlConfig","step","min","max","disableGroupSeparators","disableAbbreviations","decimalSeparator","groupSeparator","onChange","onFocus","onBlur","onKeyDown","onKeyUp","transformRawValue"]);if(A&&F(A))throw new Error("decimalSeparator cannot be a number");if(I&&F(I))throw new Error("groupSeparator cannot be a number");var K=(0,t.useMemo)((function(){return function(e){var a=e||{},r=a.locale,n=a.currency;return(r?new Intl.NumberFormat(r,n?{currency:n,style:"currency"}:void 0):new Intl.NumberFormat).formatToParts(1000.1).reduce((function(e,a,r){return"currency"===a.type?j(j({},e),0===r?{currencySymbol:a.value,prefix:a.value}:{currencySymbol:a.value,suffix:a.value}):"group"===a.type?j(j({},e),{groupSeparator:a.value}):"decimal"===a.type?j(j({},e),{decimalSeparator:a.value}):e}),D)}(y)}),[y]),$=A||K.decimalSeparator||"",z=I||K.groupSeparator||"";if($&&z&&$===z&&!1===V)throw new Error("decimalSeparator cannot be the same as groupSeparator");var G={decimalSeparator:$,groupSeparator:z,disableGroupSeparators:V,intlConfig:y,prefix:S||K.prefix,suffix:w},J={decimalSeparator:$,groupSeparator:z,allowDecimals:n,decimalsLimit:d||x||2,allowNegativeValue:l,disableAbbreviations:P,prefix:S||K.prefix,transformRawValue:H},q=void 0!==p&&null!==p?C(j(j({},G),{decimalScale:_,value:String(p)})):void 0!==h&&null!==h?C(j(j({},G),{decimalScale:_,value:String(h)})):"",Q=(0,t.useState)(q),X=Q[0],ee=Q[1],ae=(0,t.useState)(!1),re=ae[0],ne=ae[1],te=(0,t.useState)(0),oe=te[0],le=te[1],ie=(0,t.useState)(0),ce=ie[0],se=ie[1],ue=(0,t.useState)(null),de=ue[0],pe=ue[1],me=a||(0,t.useRef)(null),fe=function(e,a){ne(!0);var r=function(e){var a=e.selectionStart,r=e.value,n=e.lastKeyStroke,t=e.stateValue,o=e.groupSeparator,l=a,i=r;if(t&&l){var c=r.split("");return"Backspace"===n&&t[l]===o&&(c.splice(l-1,1),l-=1),"Delete"===n&&t[l]===o&&(c.splice(l,1),l+=1),{modifiedValue:i=c.join(""),cursorPosition:l}}return{modifiedValue:i,cursorPosition:a}}({selectionStart:a,value:e,lastKeyStroke:de,stateValue:X,groupSeparator:z}),n=r.modifiedValue,t=r.cursorPosition,o=T(j({value:n},J));if(!(v&&o.replace(/-/g,"").length>v)){if(""===o||"-"===o||o===$)return g&&g(void 0,c,{float:null,formatted:"",value:""}),void ee(o);var l=parseFloat(o.replace($,".")),i=C(j({value:o},G));if(void 0!==t&&null!==t){var s=t+(i.length-e.length);s=s<=0?S?S.length:0:s,le(s),se(ce+1)}if(ee(i),g)g(o,c,{float:l,formatted:i,value:o})}};(0,t.useEffect)((function(){re&&"-"!==X&&me&&"object"===typeof me&&me.current&&me.current.setSelectionRange(oe,oe)}),[X,oe,me,re,ce]);var ve=j({type:"text",inputMode:"decimal",id:i,name:c,className:s,onChange:function(e){var a=e.target,r=a.value,n=a.selectionStart;fe(r,n),Z&&Z(e)},onBlur:function(e){var a=e.target.value,r=T(j({value:a},J));if("-"===r||!r)return ee(""),void(L&&L(e));var n=function(e,a,r){if(r&&e.length>1){if(e.includes(a)){var n=e.split(a),t=n[0];if((o=n[1]).length>r)return""+t+a+o.slice(0,r)}var o,l=e.length>r?new RegExp("(\\d+)(\\d{"+r+"})"):new RegExp("(\\d)(\\d+)"),i=e.match(l);if(i)return""+(t=i[1])+a+i[2]}return e}(r,$,x),t=function(e,a,r){if(void 0===a&&(a="."),void 0===r||""===e||void 0===e)return e;if(!e.match(/\d/g))return"";var n=e.split(a),t=n[0],o=n[1];if(0===r)return t;var l=o||"";if(l.length<r)for(;l.length<r;)l+="0";else l=l.slice(0,r);return""+t+a+l}(n,$,void 0!==_?_:x),o=parseFloat(t.replace($,".")),l=C(j(j({},G),{value:t}));g&&g(t,c,{float:o,formatted:l,value:t}),ee(l),L&&L(e)},onFocus:function(e){return O&&O(e),X?X.length:0},onKeyDown:function(e){var a=e.key;if(pe(a),B&&("ArrowUp"===a||"ArrowDown"===a)){e.preventDefault(),le(X.length);var r=parseFloat(void 0!==h&&null!==h?String(h).replace($,"."):T(j({value:X},J)))||0,n="ArrowUp"===a?r+B:r-B;if(void 0!==N&&n<N)return;if(void 0!==R&&n>R)return;var t=String(B).includes(".")?Number(String(B).split(".")[1].length):void 0;fe(String(t?n.toFixed(t):n).replace(".",$))}U&&U(e)},onKeyUp:function(e){var a=e.key,r=e.currentTarget.selectionStart;if("ArrowUp"!==a&&"ArrowDown"!==a&&"-"!==X){var n=k(X,{groupSeparator:z,decimalSeparator:$});if(n&&r&&r>X.length-n.length&&me&&"object"===typeof me&&me.current){var t=X.length-n.length;me.current.setSelectionRange(t,t)}}W&&W(e)},placeholder:b,disabled:f,value:void 0===h||null===h||"-"===X||$&&X===$?X:C(j(j({},G),{decimalScale:re?void 0:_,value:String(h)})),ref:me},Y);if(u){var he=u;return t.createElement(he,j({},ve))}return t.createElement("input",j({},ve))}));M.displayName="CurrencyInput";var P=M,A=r(2881),I=h.Z.reports,Z=h.Z.transactions,O=d.Balance,L=d.BalanceRevers;function U(){var e=(0,t.useState)(0),a=(0,n.Z)(e,2)[1],r=(0,t.useState)(0),s=(0,n.Z)(r,2),m=s[0],h=s[1],_=(0,t.useState)(!1),j=(0,n.Z)(_,2),B=j[0],N=j[1],R=(0,t.useState)(null),T=(0,n.Z)(R,2),k=T[0],C=T[1],E=(0,i.I0)(),V=!(0,l.TH)().pathname.endsWith("transactions"),D=V?L:O,F=u()().add(m,"M").format("MMMM YYYY"),M=u()().add(m,"M").format("YYYY-MM"),U=(0,i.v9)(g.is).balance,W=(0,w._)("isNewUser",!0),H=(0,n.Z)(W,2),Y=H[0],K=H[1],$=(0,i.v9)(g.is).transactions.length,z=(0,y.Z)(Number(U));(0,t.useEffect)((function(){})),(0,t.useEffect)((function(){V&&(E((0,x.Nv)(M)),E((0,x.WP)(F)))}),[V,M,E,F]);var G=function(){return N(!B)};return(0,f.jsx)("div",{children:(0,f.jsxs)(S,{children:[(0,f.jsxs)("div",{className:"".concat(D," ").concat(d.container),children:[V&&(0,f.jsxs)(o.rU,{to:Z,className:d.linkToHome,children:[(0,f.jsx)("svg",{width:"24",height:"24",children:(0,f.jsx)("use",{href:"".concat(p.Z,"#arrow-to-main-icon")})}),(0,f.jsx)("p",{className:d.linkToHomeText,children:"Main page"})]}),(0,f.jsxs)("div",{className:d.wraper,children:[V?(0,f.jsxs)("div",{className:d.currentPeriod,children:[(0,f.jsx)("p",{className:d.currentPeriodText,children:"Current period:"}),(0,f.jsxs)("div",{className:d.monthChange,children:[(0,f.jsx)("button",{onClick:function(){h(m-1)},type:"button",className:d.monthChangeBtn,children:(0,f.jsx)("svg",{width:6,height:12,children:(0,f.jsx)("use",{href:"".concat(p.Z,"#arrow-prev-icon")})})}),(0,f.jsx)("p",{className:d.monthChangeTxt,children:F}),(0,f.jsx)("button",{onClick:function(){h(m+1)},type:"button",className:d.monthChangeBtn,children:(0,f.jsx)("svg",{width:6,height:12,children:(0,f.jsx)("use",{href:"".concat(p.Z,"#arrow-next-icon")})})})]})]}):$?(0,f.jsxs)(o.rU,{to:I,className:d.linkReports,children:["Reports",(0,f.jsx)("svg",{width:"14",height:"14",className:d.reportsIcon,children:(0,f.jsx)("use",{href:"".concat(p.Z,"#report-icon")})})]}):(0,f.jsxs)("button",{type:"button",className:d.linkReportsBtn,onClick:function(){c.Am.warning("You have not made transactions yet")},children:["Reports",(0,f.jsx)("svg",{width:"14",height:"14",className:d.reportsIcon,children:(0,f.jsx)("use",{href:"".concat(p.Z,"#report-icon")})})]}),V?(0,f.jsxs)("div",{className:d.balanceWraper,children:[(0,f.jsx)("p",{className:d.balanceTxt,children:"Balance:"}),(0,f.jsxs)("p",{className:d.inputReports,children:[z," UAH"]})]}):(0,f.jsx)("form",{className:d.form,onSubmit:function(e){var a=Number.parseFloat(k);e.preventDefault(),a<0?c.Am.warn("Balance cannot be negative"):Number.isNaN(a)?c.Am.warn("Please enter balance"):(G(),E(b.r.updateUserBalance(a)),K(!1))},children:(0,f.jsxs)("label",{className:d.label,children:[(0,f.jsx)("span",{className:d.labelText,children:"Balance:"}),(0,f.jsxs)("div",{className:d.modalWraper,children:[Y&&!$?(0,f.jsx)(P,{className:d.input,id:"balance",name:"balance",placeholder:"00.00",decimalsLimit:2,decimalSeparator:".",onValueChange:function(e){C(e)}}):(0,f.jsx)("input",{className:d.input,type:"text",required:!0,name:"balance",value:z,onChange:function(e){a(e.target.value)},readOnly:!0}),(0,f.jsx)("p",{className:d.currency,children:"UAH"}),!V&&(0,f.jsx)("button",{type:"submit",className:Y&&!$?d.buttonForm:d.buttonFormDisabled,disabled:!Y&&!$,children:"Confirm"}),Y&&!$&&(0,f.jsx)(v,{})]})]})})]})]}),(0,f.jsx)("div",{className:V?void 0:d.transactionsWrap,children:(0,f.jsx)(t.Suspense,{fallback:(0,f.jsx)(A.Z,{}),children:(0,f.jsx)(l.j3,{})})})]})})}},4367:function(e,a,r){function n(e){var a=e.toFixed(2).toString().split("."),r=a[0].split("").reverse().map((function(e,a){return(a+1)%3===0?" ".concat(e):e})).reverse().join("");return"".concat(r,".").concat(a[1])}r.d(a,{Z:function(){return n}})}}]);
//# sourceMappingURL=574.dd650216.chunk.js.map